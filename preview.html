<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学员报名小程序预览</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #f0f0f0;
            overflow-x: hidden;
        }
        
        /* 手机模拟器外壳 */
        .phone-container {
            width: 375px;
            height: 812px;
            margin: 20px auto;
            background: #000;
            border-radius: 40px;
            padding: 8px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.3);
            position: relative;
        }
        
        .phone-screen {
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 32px;
            overflow: hidden;
            position: relative;
        }
        
        /* 状态栏 */
        .status-bar {
            height: 44px;
            background: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            font-size: 14px;
            font-weight: 600;
        }
        
        /* 导航栏 */
        .nav-bar {
            height: 44px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid #eee;
            position: relative;
        }
        
        .nav-title {
            font-size: 17px;
            font-weight: 600;
            color: #000;
        }
        
        .nav-back {
            position: absolute;
            left: 16px;
            background: none;
            border: none;
            font-size: 16px;
            color: #007aff;
            cursor: pointer;
        }
        
        /* 页面内容区域 */
        .page-content {
            height: calc(100% - 88px);
            overflow-y: auto;
            background: #f8f9fa;
        }
        
        /* 页面切换控制 */
        .page-controls {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        
        .page-controls h3 {
            margin-bottom: 15px;
            color: #333;
        }
        
        .page-btn {
            display: block;
            width: 200px;
            margin-bottom: 8px;
            padding: 8px 16px;
            background: #007aff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            text-align: left;
        }
        
        .page-btn:hover {
            background: #0056cc;
        }
        
        .page-btn.active {
            background: #34c759;
        }
        
        /* 通用样式转换 */
        .container {
            padding: 20px;
            min-height: 100%;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .subtitle {
            font-size: 12px;
            color: #666;
        }
        
        .form-card, .info-card, .verify-card, .notice-card, .upload-section, .next-steps, .success-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 1px 8px rgba(0,0,0,0.05);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .label {
            display: block;
            font-size: 14px;
            color: #333;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .required {
            color: #ff4d4f;
        }
        
        .input, .textarea, .picker {
            width: 100%;
            height: 40px;
            border: 1px solid #e5e5e5;
            border-radius: 6px;
            padding: 0 10px;
            font-size: 14px;
            background: #fafafa;
        }
        
        .input:focus, .textarea:focus {
            border-color: #007aff;
            background: white;
            outline: none;
        }
        
        .textarea {
            height: 80px;
            padding: 10px;
            resize: vertical;
        }
        
        .picker {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .btn, .start-btn, .query-btn, .continue-btn, .submit-btn {
            width: 100%;
            height: 40px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 10px;
        }
        
        .start-btn, .query-btn, .submit-btn {
            background: #007aff;
            color: white;
        }
        
        .continue-btn {
            background: #52c41a;
            color: white;
        }
        
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        /* 页面特定样式 */
        .steps {
            list-style: none;
        }
        
        .step {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            color: #666;
            font-size: 14px;
        }
        
        .step:last-child {
            border-bottom: none;
        }

        /* 首页项目展示样式 */
        .project-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .project-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .project-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.12);
            border-color: #007aff;
        }
        
        .project-card:active {
            transform: translateY(0);
        }
        
        .project-icon {
            font-size: 36px;
            margin-bottom: 12px;
        }
        
        .project-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }
        
        .project-desc {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
            margin-bottom: 12px;
        }
        
        .project-status {
            font-size: 11px;
            color: #52c41a;
            background: #f6ffed;
            padding: 4px 8px;
            border-radius: 12px;
            display: inline-block;
            border: 1px solid #d9f7be;
        }
        
        .links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .link {
            color: #007aff;
            font-size: 12px;
            cursor: pointer;
        }
        
        /* 验证页面样式 */
        .verify-icon {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .loading-icon {
            width: 40px;
            height: 40px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007aff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .progress-container {
            margin-bottom: 20px;
        }
        
        .progress-bar {
            width: 100%;
            height: 4px;
            background: #f0f0f0;
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #007aff, #00d4aa);
            border-radius: 2px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        .verify-message {
            text-align: center;
            font-size: 14px;
            color: #333;
            margin-bottom: 20px;
        }
        
        /* 须知页面样式 */
        .notice-content {
            height: 300px;
            overflow-y: auto;
            border: 1px solid #eee;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        
        .notice-text {
            font-size: 13px;
            line-height: 1.6;
            color: #333;
            white-space: pre-line;
        }
        
        .agreement {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .agreement-item {
            display: flex;
            align-items: flex-start;
        }
        
        .agreement-text {
            margin-left: 10px;
            font-size: 13px;
            color: #333;
            line-height: 1.5;
        }
        
        /* 上传页面样式 */
        .payment-info {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .info-item:last-child {
            border-bottom: none;
        }
        
        .info-label {
            font-size: 14px;
            color: #666;
        }
        
        .info-value {
            font-size: 14px;
            color: #333;
            font-weight: 500;
        }
        
        .amount {
            color: #ff4d4f;
            font-weight: bold;
        }
        
        .upload-area {
            border: 2px dashed #d9d9d9;
            border-radius: 6px;
            padding: 40px 10px;
            text-align: center;
            background: #fafafa;
            cursor: pointer;
            margin-bottom: 15px;
        }
        
        .upload-area:hover {
            border-color: #007aff;
        }
        
        .upload-text {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .upload-tip {
            font-size: 12px;
            color: #999;
        }
        
        /* 成功页面样式 */
        .success-icon {
            text-align: center;
            margin-bottom: 15px;
        }
        
        .success-title {
            font-size: 18px;
            font-weight: bold;
            color: #52c41a;
            text-align: center;
            margin-bottom: 8px;
        }
        
        .success-subtitle {
            font-size: 12px;
            color: #666;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .registration-id {
            color: #007aff;
            font-family: monospace;
        }
        
        .copy-btn {
            padding: 4px 8px;
            background: #007aff;
            color: white;
            font-size: 10px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
        
        .step-list .step-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .step-number {
            width: 24px;
            height: 24px;
            background: #007aff;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            margin-right: 12px;
            flex-shrink: 0;
        }
        
        .step-text {
            font-size: 13px;
            color: #333;
            line-height: 1.5;
            margin-top: 2px;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .action-buttons .btn {
            flex: 1;
        }
        
        .btn.primary {
            background: #007aff;
            color: white;
        }
        
        .btn.secondary {
            background: white;
            color: #007aff;
            border: 1px solid #007aff;
        }

        /* 支付信息样式 */
        .payment-row {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .payment-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 0;
        }
        
        .payment-label {
            font-size: 13px;
            color: #666;
            min-width: 70px;
            flex-shrink: 0;
        }
        
        .payment-picker {
            width: 120px;
            height: 32px;
            border: 1px solid #e5e5e5;
            border-radius: 4px;
            padding: 0 8px;
            font-size: 13px;
            background: #fafafa;
        }
        
        .payment-value {
            font-size: 13px;
            color: #333;
            font-weight: 500;
        }
        
        /* 隐藏非当前页面 */
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        /* 响应式 */
        @media (max-width: 768px) {
            .page-controls {
                position: relative;
                left: 0;
                top: 0;
                margin: 10px;
                width: calc(100% - 20px);
            }
            
            .phone-container {
                width: 100%;
                height: 100vh;
                margin: 0;
                border-radius: 0;
                padding: 0;
            }
            
            .phone-screen {
                border-radius: 0;
            }
        }
    </style>
</head>
<body>
    <div class="page-controls">
        <h3>页面导航</h3>
        <button class="page-btn active" onclick="showPage('index')">1. 首页 (pages/index/)</button>
        <button class="page-btn" onclick="showPage('position-check')">2. 岗位保护查询 (pages/position-check/)</button>
        <button class="page-btn" onclick="showPage('notice')">3. 报名须知 (pages/notice/)</button>
        <button class="page-btn" onclick="showPage('registration')">4. 报名信息填写 (pages/registration/)</button>
        <button class="page-btn" onclick="showPage('payment-upload')">5. 缴费截图上传 (pages/payment-upload/)</button>
        <button class="page-btn" onclick="showPage('success')">6. 提交成功 (pages/success/)</button>
    </div>

    <div class="phone-container">
        <div class="phone-screen">
            <div class="status-bar">
                <span>9:41</span>
                <span>📶 📶 🔋</span>
            </div>
            
            <div class="nav-bar">
                <button class="nav-back" onclick="goBack()" style="display: none;">‹ 返回</button>
                <div class="nav-title">学员报名系统</div>
            </div>
            
            <div class="page-content">
                <!-- 首页 - pages/index/index.js -->
                <div id="index" class="page active">
                    <div class="container">
                        <div class="header">
                            <div class="title">学员报名系统</div>
                            <div class="subtitle">请选择报名项目</div>
                        </div>
                        
                        <div class="project-grid">
                            <div class="project-card" onclick="startRegistration('xuandiao')">
                                <div class="project-icon">📝</div>
                                <div class="project-title">选调生课程</div>
                                <div class="project-desc">选调生课程报名通道</div>
                                <div class="project-status">正在报名中</div>
                            </div>
                            
                            <div class="project-card" onclick="startRegistration('shengkao')">
                                <div class="project-icon">📋</div>
                                <div class="project-title">省考课程</div>
                                <div class="project-desc">省考课程报名通道</div>
                                <div class="project-status">正在报名中</div>
                            </div>
                        </div>
                        
                        <div class="info-card">
                            <div class="title">报名流程说明</div>
                            <div class="steps">
                                <div class="step">1. 选择报名项目</div>
                                <div class="step">2. 岗位保护查询</div>
                                <div class="step">3. 阅读报名须知</div>
                                <div class="step">4. 填写报名信息</div>
                                <div class="step">5. 上传缴费截图</div>
                            </div>
                        </div>
                        
                        <div class="footer">
                            <div class="links">
                                <span class="link">常见问题</span>
                                <span class="link">联系我们</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 岗位保护查询页 - pages/position-check/position-check.js -->
                <div id="position-check" class="page">
                    <div class="container">
                        <div class="header">
                            <div class="title">岗位保护查询</div>
                            <div class="subtitle">请输入身份信息进行查询</div>
                        </div>
                        
                        <div class="form-card">
                            <div class="form-group">
                                <label class="label">岗位代码</label>
                                <input class="input" placeholder="请输入岗位代码" id="positionCode" />
                            </div>
                            
                            <button class="query-btn" onclick="queryPosition()" id="queryBtn">查询岗位保护</button>
                        </div>
                        
                        <div class="verify-card" id="verifyingSection" style="display: none;">
                            <div class="verify-icon">
                                <div class="loading-icon" id="loadingIcon"></div>
                                <div id="resultIcon" style="display: none; font-size: 40px; text-align: center;"></div>
                            </div>
                            
                            <div class="progress-container" id="progressContainer">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progressFill"></div>
                                </div>
                                <div style="text-align: center; font-size: 12px; color: #666;" id="progressText">0%</div>
                            </div>
                            
                            <div class="verify-message" id="verifyMessage">正在查询岗位信息...</div>
                        </div>
                        
                        <div class="form-card" id="queryResult" style="display: none;">
                            <div class="title">查询结果</div>
                            <div id="resultMessage" style="padding: 15px; margin: 10px 0; border-radius: 4px;"></div>
                            <button class="continue-btn" id="continueBtn" onclick="showPage('notice')" style="display: none;">继续报名</button>
                        </div>
                        
                        <div class="info-card">
                            <div class="title">温馨提示</div>
                            <div class="step">• 岗位代码查询是必要步骤，请如实填写</div>
                            <div class="step">• 系统将自动检查您的报名资格</div>
                            <div class="step">• 如有疑问，请联系管理员</div>
                        </div>
                    </div>
                </div>

                <!-- 黑名单校验页 - pages/blacklist-verify/blacklist-verify.js -->
                <div id="blacklist-verify" class="page">
                    <div class="container">
                        <div class="header">
                            <div class="title">黑名单校验</div>
                            <div class="subtitle">正在检查您的报名资格</div>
                        </div>
                        
                        <div class="verify-card">
                            <div class="verify-icon">
                                <div class="loading-icon" id="loadingIcon"></div>
                                <div id="resultIcon" style="display: none; font-size: 40px; text-align: center;"></div>
                            </div>
                            
                            <div class="progress-container" id="progressContainer">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progressFill"></div>
                                </div>
                                <div style="text-align: center; font-size: 12px; color: #666;" id="progressText">0%</div>
                            </div>
                            
                            <div class="verify-message" id="verifyMessage">正在进行黑名单校验...</div>
                            
                            <div id="verifyActions" style="display: none;">
                                <button class="continue-btn" id="verifyContinue" onclick="showPage('notice')">继续报名</button>
                            </div>
                        </div>
                        
                        <div class="info-card">
                            <div class="title">校验说明</div>
                            <div class="step">• 系统将自动检查您的报名资格</div>
                            <div class="step">• 校验过程大约需要3-5秒</div>
                            <div class="step">• 如有疑问请联系管理员</div>
                        </div>
                    </div>
                </div>

                <!-- 报名须知页 - pages/notice/notice.js -->
                <div id="notice" class="page">
                    <div class="container">
                        <div class="header">
                            <div class="title">报名须知</div>
                            <div class="subtitle">请仔细阅读以下内容</div>
                        </div>
                        
                        <div class="notice-card">
                            <div class="notice-content" id="noticeContent" onscroll="checkScroll()">
                                <div class="notice-text">报名须知

1. 报名条件
   • 年满18周岁，身体健康
   • 具备相应的学历要求
   • 无不良记录

2. 报名流程  
   • 通过岗位保护查询
   • 完成黑名单校验
   • 阅读并同意本须知
   • 填写完整报名信息
   • 上传缴费凭证

3. 注意事项
   • 请确保填写信息真实有效
   • 报名费用一经缴纳不予退还
   • 如发现虚假信息将取消报名资格

4. 联系方式
   • 咨询电话：400-xxx-xxxx
   • 工作时间：9:00-18:00</div>
                            </div>
                        </div>
                        
                        <div class="agreement">
                            <label class="agreement-item">
                                <input type="checkbox" id="agreeCheckbox" onchange="checkAgreement()" disabled>
                                <span class="agreement-text" id="agreeText" style="color: #ccc;">我已仔细阅读并同意以上报名须知</span>
                            </label>
                        </div>
                        
                        <button class="continue-btn" id="noticeContinue" onclick="showPage('registration')" disabled>继续填写报名信息</button>
                        
                        <div id="scrollTip" style="position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: white; padding: 8px 16px; border-radius: 20px; font-size: 12px;">
                            请滑动到底部阅读完整内容
                        </div>
                    </div>
                </div>

                <!-- 报名信息填写页 - pages/registration/registration.js -->
                <div id="registration" class="page">
                    <div class="container" style="padding-bottom: 60px;">
                        <div class="header">
                            <div class="title">填写报名信息</div>
                            <div class="subtitle">请如实填写以下信息</div>
                        </div>
                        
                        <div class="form-card">
                            <div style="font-size: 15px; font-weight: bold; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #f0f0f0;">基本信息</div>
                            
                            <div class="form-group">
                                <label class="label">姓名 <span class="required">*</span></label>
                                <input class="input" placeholder="请输入真实姓名" id="userName" />
                            </div>
                            
                            <div class="form-group">
                                <label class="label">身份证号 <span class="required">*</span></label>
                                <input class="input" disabled value="已从上一步获取" style="background: #f5f5f5; color: #999;" />
                            </div>
                            
                            <div class="form-group">
                                <label class="label">手机号码 <span class="required">*</span></label>
                                <input class="input" placeholder="请输入手机号码" type="tel" maxlength="11" id="userPhone" />
                            </div>
                            
                            <div class="form-group">
                                <label class="label">电子邮箱 <span class="required">*</span></label>
                                <input class="input" placeholder="请输入邮箱地址" type="email" id="userEmail" />
                            </div>
                        </div>
                        
                        <div class="form-card">
                            <div style="font-size: 15px; font-weight: bold; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #f0f0f0;">报名详情</div>
                            
                            <div class="form-group">
                                <label class="label">报名岗位 <span class="required">*</span></label>
                                <select class="picker" id="userPosition">
                                    <option value="">请选择岗位</option>
                                    <option value="岗位A">岗位A</option>
                                    <option value="岗位B">岗位B</option>
                                    <option value="岗位C">岗位C</option>
                                    <option value="岗位D">岗位D</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="label">学历 <span class="required">*</span></label>
                                <select class="picker" id="userEducation">
                                    <option value="">请选择学历</option>
                                    <option value="高中">高中</option>
                                    <option value="大专">大专</option>
                                    <option value="本科">本科</option>
                                    <option value="硕士">硕士</option>
                                    <option value="博士">博士</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="label">工作经验</label>
                                <textarea class="textarea" placeholder="请简述相关工作经验（选填）" maxlength="200" id="userExperience"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="label">备注信息</label>
                                <textarea class="textarea" placeholder="其他需要说明的信息（选填）" maxlength="200" id="userRemark"></textarea>
                            </div>
                        </div>
                        
                        <div style="position: fixed; bottom: 0; left: 0; right: 0; padding: 10px 20px; background: white; border-top: 1px solid #eee;">
                            <button class="submit-btn" onclick="submitForm()">提交报名信息</button>
                        </div>
                    </div>
                </div>

                <!-- 缴费截图上传页 - pages/payment-upload/payment-upload.js -->
                <div id="payment-upload" class="page">
                    <div class="container" style="padding-bottom: 60px;">
                        <div class="header">
                            <div class="title">上传缴费截图</div>
                            <div class="subtitle">请上传报名费用的支付凭证</div>
                        </div>
                        
                        <div class="payment-info">
                            <div style="font-weight: bold; margin-bottom: 15px;">缴费信息</div>
                            <div class="info-item">
                                <span class="info-label">报名费用：</span>
                                <span class="info-value amount">¥298.00</span>
                            </div>
                            <div class="payment-row">
                                <div class="payment-item">
                                    <span class="payment-label">支付方式：</span>
                                    <select class="payment-picker" id="paymentMethod">
                                        <option value="">请选择</option>
                                        <option value="tenpay">财付通</option>
                                        <option value="alipay">支付宝</option>
                                        <option value="bankcard">银行卡</option>
                                    </select>
                                </div>
                                <div class="payment-item">
                                    <span class="payment-label">收款账户：</span>
                                    <div style="display: flex; align-items: center; gap: 6px;">
                                        <span class="payment-value" id="accountNumber">招商银行 6214 8320 2243 7987（梁卓然）</span>
                                        <button class="copy-btn" onclick="copyBankAccount()">复制</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="upload-section">
                            <div style="font-weight: bold; margin-bottom: 15px;">上传缴费截图</div>
                            
                            <div class="upload-area" id="uploadArea" onclick="selectImage()">
                                <div style="font-size: 24px; margin-bottom: 10px;">📷</div>
                                <div class="upload-text">点击上传缴费截图</div>
                                <div class="upload-tip">支持JPG、PNG格式，大小不超过5MB</div>
                            </div>
                            
                            <div id="imagePreview" style="display: none; text-align: center;">
                                <img id="previewImg" style="max-width: 150px; max-height: 200px; border-radius: 6px; margin-bottom: 15px;">
                                <div>
                                    <button class="btn" style="background: #007aff; color: white; width: auto; padding: 8px 16px; margin-right: 10px;" onclick="previewImage()">预览</button>
                                    <button class="btn" style="background: #ff4d4f; color: white; width: auto; padding: 8px 16px;" onclick="deleteImage()">删除</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="info-card">
                            <div style="font-weight: bold; margin-bottom: 10px; color: #0277bd;">上传说明</div>
                            <div class="step">• 请确保截图清晰完整，包含支付金额和时间</div>
                            <div class="step">• 上传后请仔细检查图片是否清晰可见</div>
                            <div class="step">• 缴费凭证将作为报名审核的重要依据</div>
                        </div>
                        
                        <div style="position: fixed; bottom: 0; left: 0; right: 0; padding: 10px 20px; background: white; border-top: 1px solid #eee;">
                            <button class="btn" id="finalSubmit" onclick="submitPayment()" disabled style="background: #52c41a; color: white;">完成报名提交</button>
                        </div>
                    </div>
                </div>

                <!-- 提交成功页 - pages/success/success.js -->
                <div id="success" class="page">
                    <div class="container">
                        <div class="success-card">
                            <div class="success-icon">
                                <div style="font-size: 60px;">✅</div>
                            </div>
                            
                            <div class="success-title">报名提交成功！</div>
                            <div class="success-subtitle">您的报名信息已成功提交到系统</div>
                            
                            <div style="text-align: left; margin-top: 20px;">
                                <div class="info-item">
                                    <span class="info-label">报名编号</span>
                                    <div style="display: flex; align-items: center;">
                                        <span class="info-value registration-id" id="finalRegId">REG1642567890123</span>
                                        <button class="copy-btn" onclick="copyId()">复制</button>
                                    </div>
                                </div>
                                
                                <div class="info-item">
                                    <span class="info-label">报名姓名</span>
                                    <span class="info-value" id="finalName">张三</span>
                                </div>
                                
                                <div class="info-item">
                                    <span class="info-label">报名岗位</span>
                                    <span class="info-value" id="finalPosition">岗位A</span>
                                </div>
                                
                                <div class="info-item">
                                    <span class="info-label">提交时间</span>
                                    <span class="info-value" id="finalTime">2024-01-15 14:30:25</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="next-steps">
                            <div style="font-weight: bold; margin-bottom: 15px;">后续流程</div>
                            <div class="step-list">
                                <div class="step-item">
                                    <div class="step-number">1</div>
                                    <div class="step-text">工作人员将在1-3个工作日内审核您的报名信息</div>
                                </div>
                                <div class="step-item">
                                    <div class="step-number">2</div>
                                    <div class="step-text">审核通过后将通过短信/邮件通知您</div>
                                </div>
                                <div class="step-item">
                                    <div class="step-number">3</div>
                                    <div class="step-text">请保持手机畅通，注意接收相关通知</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn secondary" onclick="alert('客服电话：400-xxx-xxxx\\n工作时间：9:00-18:00')">联系客服</button>
                            <button class="btn primary" onclick="showPage('index')">返回首页</button>
                        </div>
                        
                        <div style="background: #fff7e6; border-radius: 6px; padding: 10px; border: 1px solid #ffd591;">
                            <div style="font-size: 12px; color: #d46b08; text-align: center;">温馨提示：请妥善保存报名编号，后续查询时需要使用</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <input type="file" id="fileInput" accept="image/*" style="display: none;" onchange="handleImageSelect(event)">

    <script>
        let currentPage = 'index';
        let pageHistory = [];
        let hasReadNotice = false;
        let hasUploadedImage = false;
        let selectedProject = null; // 存储选择的项目类型
        
        function showPage(pageId) {
            // 隐藏所有页面
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // 显示目标页面
            document.getElementById(pageId).classList.add('active');
            
            // 更新按钮状态
            document.querySelectorAll('.page-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // 更新历史记录
            if (currentPage !== pageId) {
                pageHistory.push(currentPage);
                currentPage = pageId;
            }
            
            // 更新导航栏
            updateNavBar(pageId);
            
            // 页面特定处理
            if (pageId === 'blacklist-verify') {
                startVerification();
            } else if (pageId === 'notice') {
                resetNotice();
            }
        }
        
        function updateNavBar(pageId) {
            const titles = {
                'index': '学员报名系统',
                'position-check': '岗位保护查询',
                'notice': '报名须知',
                'registration': '填写报名信息',
                'payment-upload': '上传缴费截图',
                'success': '提交成功'
            };
            
            document.querySelector('.nav-title').textContent = titles[pageId];
            
            const backBtn = document.querySelector('.nav-back');
            if (pageId === 'index') {
                backBtn.style.display = 'none';
            } else {
                backBtn.style.display = 'block';
            }
        }
        
        function goBack() {
            if (pageHistory.length > 0) {
                const previousPage = pageHistory.pop();
                currentPage = previousPage;
                showPage(previousPage);
            }
        }
        
        // 岗位保护查询功能（整合黑名单校验）
        function queryPosition() {
            const positionCode = document.getElementById('positionCode').value.trim();
            if (!positionCode || positionCode.length < 3) {
                alert('请输入正确的岗位代码');
                return;
            }
            
            const queryBtn = document.getElementById('queryBtn');
            const verifyingSection = document.getElementById('verifyingSection');
            const resultDiv = document.getElementById('queryResult');
            
            // 隐藏之前可能显示的结果
            resultDiv.style.display = 'none';
            
            // 显示验证动效区域
            verifyingSection.style.display = 'block';
            
            queryBtn.textContent = '查询中...';
            queryBtn.disabled = true;
            
            // 开始进度动画
            startPositionVerification();
        }
        
        function startPositionVerification() {
            const loadingIcon = document.getElementById('loadingIcon');
            const resultIcon = document.getElementById('resultIcon');
            const progressContainer = document.getElementById('progressContainer');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const verifyMessage = document.getElementById('verifyMessage');
            
            // 重置状态
            loadingIcon.style.display = 'block';
            resultIcon.style.display = 'none';
            progressContainer.style.display = 'block';
            verifyMessage.textContent = '正在查询岗位信息...';
            
            // 模拟进度
            let progress = 0;
            const interval = setInterval(() => {
                progress += 3;
                progressFill.style.width = progress + '%';
                progressText.textContent = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    completePositionVerification();
                }
            }, 60);
        }
        
        function completePositionVerification() {
            setTimeout(() => {
                const hasIssue = Math.random() > 0.8; // 20%概率有问题（保护或黑名单）
                const loadingIcon = document.getElementById('loadingIcon');
                const resultIcon = document.getElementById('resultIcon');
                const progressContainer = document.getElementById('progressContainer');
                const verifyMessage = document.getElementById('verifyMessage');
                const verifyingSection = document.getElementById('verifyingSection');
                const resultDiv = document.getElementById('queryResult');
                const messageDiv = document.getElementById('resultMessage');
                const continueBtn = document.getElementById('continueBtn');
                const queryBtn = document.getElementById('queryBtn');
                
                loadingIcon.style.display = 'none';
                resultIcon.style.display = 'block';
                progressContainer.style.display = 'none';
                
                // 隐藏验证动效区域
                verifyingSection.style.display = 'none';
                
                // 显示结果区域
                resultDiv.style.display = 'block';
                
                if (hasIssue) {
                    resultIcon.textContent = '❌';
                    verifyMessage.textContent = '查询完成';
                    messageDiv.textContent = '查询到岗位保护或资格限制，暂时无法报名此岗位';
                    messageDiv.style.background = '#fff2f0';
                    messageDiv.style.color = '#ff4d4f';
                    messageDiv.style.border = '1px solid #ffccc7';
                    continueBtn.style.display = 'none';
                } else {
                    resultIcon.textContent = '✅';
                    verifyMessage.textContent = '查询完成';
                    messageDiv.textContent = '岗位查询通过，可以继续报名';
                    messageDiv.style.background = '#f6ffed';
                    messageDiv.style.color = '#52c41a';
                    messageDiv.style.border = '1px solid #d9f7be';
                    continueBtn.style.display = 'block';
                }
                
                queryBtn.textContent = '查询岗位保护';
                queryBtn.disabled = false;
            }, 1000);
        }
        
        // 黑名单校验功能
        function startVerification() {
            const loadingIcon = document.getElementById('loadingIcon');
            const resultIcon = document.getElementById('resultIcon');
            const progressContainer = document.getElementById('progressContainer');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const verifyMessage = document.getElementById('verifyMessage');
            const verifyActions = document.getElementById('verifyActions');
            
            // 重置状态
            loadingIcon.style.display = 'block';
            resultIcon.style.display = 'none';
            progressContainer.style.display = 'block';
            verifyActions.style.display = 'none';
            verifyMessage.textContent = '正在进行黑名单校验...';
            
            // 模拟进度
            let progress = 0;
            const interval = setInterval(() => {
                progress += 2;
                progressFill.style.width = progress + '%';
                progressText.textContent = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    completeVerification();
                }
            }, 50);
        }
        
        function completeVerification() {
            setTimeout(() => {
                const isBlacklisted = Math.random() > 0.9; // 10%概率在黑名单
                const loadingIcon = document.getElementById('loadingIcon');
                const resultIcon = document.getElementById('resultIcon');
                const progressContainer = document.getElementById('progressContainer');
                const verifyMessage = document.getElementById('verifyMessage');
                const verifyActions = document.getElementById('verifyActions');
                
                loadingIcon.style.display = 'none';
                resultIcon.style.display = 'block';
                progressContainer.style.display = 'none';
                verifyActions.style.display = 'block';
                
                if (isBlacklisted) {
                    resultIcon.textContent = '❌';
                    verifyMessage.textContent = '很抱歉，您在黑名单中，无法继续报名';
                    verifyMessage.style.color = '#ff4d4f';
                    document.getElementById('verifyActions').innerHTML = '<button class="btn" style="background: #ff4d4f; color: white;" onclick="showPage(\'position-check\')">返回上一步</button>';
                } else {
                    resultIcon.textContent = '✅';
                    verifyMessage.textContent = '黑名单校验通过，可以继续报名';
                    verifyMessage.style.color = '#52c41a';
                }
            }, 1000);
        }
        
        // 须知页面功能
        function checkScroll() {
            const noticeContent = document.getElementById('noticeContent');
            const scrollTip = document.getElementById('scrollTip');
            const agreeCheckbox = document.getElementById('agreeCheckbox');
            const agreeText = document.getElementById('agreeText');
            
            if (noticeContent.scrollTop + noticeContent.clientHeight >= noticeContent.scrollHeight - 10) {
                hasReadNotice = true;
                scrollTip.style.display = 'none';
                agreeCheckbox.disabled = false;
                agreeText.style.color = '#333';
            }
        }
        
        function resetNotice() {
            hasReadNotice = false;
            const scrollTip = document.getElementById('scrollTip');
            const agreeCheckbox = document.getElementById('agreeCheckbox');
            const agreeText = document.getElementById('agreeText');
            const continueBtn = document.getElementById('noticecontinue');
            
            scrollTip.style.display = 'block';
            agreeCheckbox.disabled = true;
            agreeCheckbox.checked = false;
            agreeText.style.color = '#ccc';
            continueBtn.disabled = true;
        }
        
        function checkAgreement() {
            const agreeCheckbox = document.getElementById('agreeCheckbox');
            const continueBtn = document.getElementById('noticeontinue');
            
            continueBtn.disabled = !agreeCheckbox.checked;
        }
        
        // 表单验证和提交
        function submitForm() {
            const name = document.getElementById('userName').value.trim();
            const phone = document.getElementById('userPhone').value.trim();
            const email = document.getElementById('userEmail').value.trim();
            const position = document.getElementById('userPosition').value;
            const education = document.getElementById('userEducation').value;
            
            if (!name) {
                alert('请填写姓名');
                return;
            }
            
            if (!phone || !/^1[3-9]\d{9}$/.test(phone)) {
                alert('请填写正确的手机号');
                return;
            }
            
            if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                alert('请填写正确的邮箱');
                return;
            }
            
            if (!position) {
                alert('请选择报名岗位');
                return;
            }
            
            if (!education) {
                alert('请选择学历');
                return;
            }
            
            // 存储数据用于成功页面显示
            localStorage.setItem('registrationData', JSON.stringify({
                name: name,
                phone: phone,
                email: email,
                position: position,
                education: education
            }));
            
            showPage('payment-upload');
        }
        
        // 图片上传功能
        function selectImage() {
            document.getElementById('fileInput').click();
        }
        
        function handleImageSelect(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const uploadArea = document.getElementById('uploadArea');
                    const imagePreview = document.getElementById('imagePreview');
                    const previewImg = document.getElementById('previewImg');
                    const finalSubmit = document.getElementById('finalSubmit');
                    
                    uploadArea.style.display = 'none';
                    imagePreview.style.display = 'block';
                    previewImg.src = e.target.result;
                    hasUploadedImage = true;
                    finalSubmit.disabled = false;
                };
                reader.readAsDataURL(file);
            }
        }
        
        function previewImage() {
            const previewImg = document.getElementById('previewImg');
            const newWindow = window.open('', '_blank');
            newWindow.document.write('<img src="' + previewImg.src + '" style="max-width: 100%; max-height: 100%;">');
        }
        
        function deleteImage() {
            if (confirm('确定要删除这张缴费截图吗？')) {
                const uploadArea = document.getElementById('uploadArea');
                const imagePreview = document.getElementById('imagePreview');
                const finalSubmit = document.getElementById('finalSubmit');
                
                uploadArea.style.display = 'block';
                imagePreview.style.display = 'none';
                hasUploadedImage = false;
                finalSubmit.disabled = true;
                document.getElementById('fileInput').value = '';
            }
        }
        
        function submitPayment() {
            const paymentMethod = document.getElementById('paymentMethod').value;
            if (!paymentMethod) {
                alert('请选择支付方式');
                return;
            }
            
            if (!hasUploadedImage) {
                alert('请上传缴费截图');
                return;
            }
            
            const submitBtn = document.getElementById('finalSubmit');
            submitBtn.textContent = '提交中...';
            submitBtn.disabled = true;
            
            setTimeout(() => {
                // 生成报名编号
                const registrationId = 'REG' + Date.now();
                
                // 获取报名数据
                const registrationData = JSON.parse(localStorage.getItem('registrationData') || '{}');
                
                // 更新成功页面信息
                document.getElementById('finalRegId').textContent = registrationId;
                document.getElementById('finalName').textContent = registrationData.name || '张三';
                document.getElementById('finalPosition').textContent = registrationData.position || '岗位A';
                document.getElementById('finalTime').textContent = new Date().toLocaleString('zh-CN');
                
                showPage('success');
                
                submitBtn.textContent = '完成报名提交';
                submitBtn.disabled = false;
            }, 3000);
        }
        
        function copyId() {
            const regId = document.getElementById('finalRegId').textContent;
            navigator.clipboard.writeText(regId).then(() => {
                alert('报名编号已复制');
            });
        }
        
        // 银行卡复制功能
        
        function copyBankAccount() {
            const accountText = document.getElementById('accountNumber').textContent;
            const bankCardNumber = accountText.match(/\d{4} \d{4} \d{4} \d{4}/);
            
            if (bankCardNumber) {
                const cardNumber = bankCardNumber[0].replace(/\s/g, ''); // 移除空格
                navigator.clipboard.writeText(cardNumber).then(() => {
                    alert('银行卡号已复制：' + bankCardNumber[0]);
                }).catch(() => {
                    // 兼容性处理
                    const textArea = document.createElement('textarea');
                    textArea.value = cardNumber;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert('银行卡号已复制：' + bankCardNumber[0]);
                });
            } else {
                alert('当前支付方式暂不支持复制');
            }
        }
        
        // 项目选择功能
        function startRegistration(projectType) {
            selectedProject = projectType;
            
            // 更新导航标题显示选择的项目
            const projectNames = {
                'xuandiao': '选调生课程报名',
                'shengkao': '省考课程报名'
            };
            
            // 存储项目类型供后续使用
            localStorage.setItem('selectedProject', projectType);
            localStorage.setItem('projectName', projectNames[projectType]);
            
            // 跳转到岗位保护查询页
            showPage('position-check');
        }
        
        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            updateNavBar('index');
        });
    </script>
</body>
</html>